<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="SaveH2o Saving water saves lives.  H2o-1-usb  Model: H2o-1-usb Hardware: h2o-1-usb-r1 Firmware: h2o-1-v0.032 available on github.  Alerts  2-short-beeps: hello after power on reset 3-short-beeps: leak alarm led turn on together with buzzer beeps  Programmable parameters  start alarm 30 s after running non-stop (alarm_count = 30L) stop for 60 s to clear alarm/non-stop status (stop_filter = 60L)  Angular speed formula The prototype h2o-1-v0.03 generate a real-time series of data with measures of the periods of the pulses generated by the water flow sensor."><meta property="og:title" content="Operation"><meta property="og:description" content="SaveH2o Saving water saves lives.  H2o-1-usb  Model: H2o-1-usb Hardware: h2o-1-usb-r1 Firmware: h2o-1-v0.032 available on github.  Alerts  2-short-beeps: hello after power on reset 3-short-beeps: leak alarm led turn on together with buzzer beeps  Programmable parameters  start alarm 30 s after running non-stop (alarm_count = 30L) stop for 60 s to clear alarm/non-stop status (stop_filter = 60L)  Angular speed formula The prototype h2o-1-v0.03 generate a real-time series of data with measures of the periods of the pulses generated by the water flow sensor."><meta property="og:type" content="article"><meta property="og:url" content="https://saveh2o.github.io/docs/docs/products/h2o-1-usb/operation/"><title>Operation | SaveH2o v0.03</title><link rel=icon href=/docs/favicon.png type=image/x-icon><link rel=stylesheet href=/docs/book.min.63eb88daa545365405ecdbb21033286a325c60a36cfa6d22d21e7c3bc9286941.css integrity="sha256-Y+uI2qVFNlQF7NuyEDMoajJcYKNs+m0i0h58O8koaUE="><script defer src=/docs/en.search.min.5ea999a575e0558cb0072985d5bfe377b8d596b728d77153d6c66b50617ad6c1.js integrity="sha256-XqmZpXXgVYywBymF1b/jd7jVlrco13FT1sZrUGF61sE="></script></head><body><input type=checkbox class=hidden id=menu-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/docs><span>SaveH2o v0.03</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/docs/docs/products/>Products</a><ul><li><a href=/docs/docs/products/h2o-1-usb/>H2o-1-usb</a><ul><li><a href=/docs/docs/products/h2o-1-usb/get_started/>Get Started</a></li><li><a href=/docs/docs/products/h2o-1-usb/operation/ class=active>Operation</a></li><li><a href=/docs/docs/products/h2o-1-usb/specs/>Specification</a></li></ul></li></ul></li></ul><ul><li><a href=/docs/posts/>Blog</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/docs/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Operation</strong>
<label for=toc-control><img src=/docs/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><input type=checkbox class=hidden id=toc-control><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#h2o-1-usb>H2o-1-usb</a><ul><li><a href=#alerts>Alerts</a></li><li><a href=#programmable-parameters>Programmable parameters</a></li><li><a href=#angular-speed-formula>Angular speed formula</a></li><li><a href=#real-time-data-logging>Real time data logging</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=saveh2o>SaveH2o</h1><blockquote class="book-hint info"><strong>Saving water saves lives.</strong></blockquote><h2 id=h2o-1-usb>H2o-1-usb</h2><ul><li>Model: H2o-1-usb</li><li>Hardware: h2o-1-usb-r1</li><li>Firmware: h2o-1-v0.032 available on <a href=https://github.com/SaveH2o/arduino>github</a>.</li></ul><h3 id=alerts>Alerts</h3><ul><li>2-short-beeps: hello after power on reset</li><li>3-short-beeps: leak alarm</li><li>led turn on together with buzzer beeps</li></ul><h3 id=programmable-parameters>Programmable parameters</h3><ul><li>start alarm 30 s after running non-stop (alarm_count = 30L)</li><li>stop for 60 s to clear alarm/non-stop status (stop_filter = 60L)</li></ul><h3 id=angular-speed-formula>Angular speed formula</h3><p>The prototype h2o-1-v0.03 generate a real-time series of data with measures of the periods of the pulses generated by the water flow sensor. The following parameters apply, in order to support several water flows sensors with minimal changes in the software:</p><ul><li><em>periodcount</em> is the period of the pulse generated by sensor</li><li><em>lapcount</em> = 4 pulses/turn for <a href=https://www.aliexpress.com/item/32958118358.html>YF-S201</a> Water Flow Sensor</li><li><em>unit</em> = 4 us, is the unit time of each count</li></ul><p>The water flow sensor rotates based on the following angular speed:</p><link rel=stylesheet href=/docs/katex/katex.min.css><script defer src=/docs/katex/katex.min.js></script><script defer src=/docs/katex/auto-render.min.js onload=renderMathInElement(document.body);></script><span class=katex>\(
\begin{aligned}
periodtime&=periodcount*lapcount*unit \\
   &=periodcount*4*4\mu s \\
   &=periodcount*16*10^{-6} \,s \\
frequency&=\frac{1}{periodtime} \,Hz
\end{aligned}
\)</span><h3 id=real-time-data-logging>Real time data logging</h3><p>The <strong>H2o-1-usb</strong> is equipped with a serial port that issues a real time data logging of water flow speed for testing and supervisory activities. In order to activate it, run the <em>Arduino IDE</em> and launch the Serial Monitor:</p><ul><li>CTRL-SHIFT-M at the keyboard or</li><li>select <em>Tools | Serial Monitor</em> from the menu.</li></ul><p>If thereÂ´s no water flowing on the sensor, the screen shows a stop count, as shown below. The sample rate is one line per second:</p><p><img src=https://user-images.githubusercontent.com/86032/93905605-894b4f80-fcd1-11ea-8e28-fb4930ef299d.png alt=image></p><p>When water starts flowing, the screen shows samples, containing the periods of the pulses sent by the sensor. For the <a href=https://www.aliexpress.com/item/32958118358.html>YF-S201</a> sensor, each pulse means that 1/4 of internal wheel rotation has ocurred. The time unit, or the resolution of this measure is 4 microseconds.</p><p><img src=https://user-images.githubusercontent.com/86032/93906287-64a3a780-fcd2-11ea-8994-4dd9c836be19.png alt=image></p><p>At the above log, the first <em>periodcount</em> shows 1.520.477.425. Multiplying it for 4 us, we conclude the water flow has stopped for 6081 seconds.</p><p>If the water keep flowing, after non-stop count reaches a programmable count (<em>30</em> for alfa test), the alarm is activated with a continuous 3-short-beeps. The real time log keep showing <em>periodcounts</em>, as shown below.</p><p><img src=https://user-images.githubusercontent.com/86032/93910478-85223080-fcd7-11ea-880d-b0dabf160154.png alt=image></p><p>The alarm is automatically reset after water flow stops for 60 seconds.</p><p><img src=https://user-images.githubusercontent.com/86032/93911225-81db7480-fcd8-11ea-96c2-0e1ba29c92eb.png alt=image></p><p>Please note that the non-stop counting keeps increasing if water flows slowly, as shown below. In this case, the alarm will start after non-stop count reaches the programmable setup (<em>30</em> for alfa test).</p><p><img src=https://user-images.githubusercontent.com/86032/93915028-cb7a8e00-fcdd-11ea-8c7c-a968450eaee5.png alt=image></p><p>All programmable parameters expect to be set/programmed by user. We expect to decide the best values and/or actions to apply after the wet alfa tests.</p></article><footer class=book-footer><div class="flex justify-between"></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#h2o-1-usb>H2o-1-usb</a><ul><li><a href=#alerts>Alerts</a></li><li><a href=#programmable-parameters>Programmable parameters</a></li><li><a href=#angular-speed-formula>Angular speed formula</a></li><li><a href=#real-time-data-logging>Real time data logging</a></li></ul></li></ul></nav></aside></main></body></html>